{"version":3,"sources":["../src/ai.ts","../src/ai/index.ts"],"sourcesContent":["/**\n * AI Client - Auto-detecting, provider-agnostic AI integration\n *\n * Just set your API key and it works:\n *   ANTHROPIC_API_KEY → Uses Claude\n *   OPENAI_API_KEY → Uses GPT-4\n *   GOOGLE_API_KEY → Uses Gemini\n *   (etc.)\n *\n * Or explicitly configure:\n *   const { model } = await getProvider('anthropic', 'claude-3-opus');\n */\n\nimport { generateText, streamText, tool, type LanguageModel } from 'ai';\nimport type { z } from 'zod';\nimport { detectProvider, getAIProvider, type DetectedProvider } from './ai/index.js';\n\n// Re-export provider utilities\nexport { detectProvider, getAIProvider, getAvailableAIProviders, listAIProviders, DEFAULT_MODELS } from './ai/index.js';\nexport type { DetectedProvider } from './ai/index.js';\n\n// Tool type (loose to avoid version conflicts)\nexport type ToolSet = Record<string, any>;\n\n// Cached detected provider\nlet cachedProvider: DetectedProvider | null = null;\n\n/**\n * Get the auto-detected AI model\n * Caches the result for performance\n */\nexport async function getModel(forceRefresh = false): Promise<DetectedProvider> {\n    if (!cachedProvider || forceRefresh) {\n        cachedProvider = await detectProvider();\n    }\n    return cachedProvider;\n}\n\n/**\n * Resolve a model - either auto-detect or use explicit provider/model\n */\nexport async function resolveModel(options: {\n    provider?: string;\n    model?: string;\n} = {}): Promise<{ providerName: string; modelId: string; model: LanguageModel }> {\n    if (options.provider) {\n        // Explicit provider requested\n        const { model, modelId } = await getAIProvider(options.provider, options.model);\n        return { providerName: options.provider, modelId, model };\n    }\n\n    // Auto-detect\n    const detected = await getModel();\n    return {\n        providerName: detected.name,\n        modelId: detected.modelId,\n        model: detected.model,\n    };\n}\n\nexport interface GenerateOptions {\n    /** Explicit provider name (auto-detects if not set) */\n    provider?: string;\n    /** Model ID (uses provider default if not set) */\n    model?: string;\n    /** System prompt */\n    system?: string;\n    /** Max output tokens */\n    maxTokens?: number;\n    /** Temperature (0-1) */\n    temperature?: number;\n}\n\n/**\n * Generate text using auto-detected or specified provider\n */\nexport async function generate(prompt: string, options: GenerateOptions = {}): Promise<string> {\n    const { model } = await resolveModel(options);\n\n    const result = await generateText({\n        model,\n        system: options.system,\n        prompt,\n        temperature: options.temperature,\n        maxTokens: options.maxTokens,\n    } as any);\n\n    return result.text;\n}\n\n/**\n * Stream text using auto-detected or specified provider\n */\nexport async function stream(prompt: string, options: GenerateOptions = {}): Promise<ReturnType<typeof streamText>> {\n    const { model } = await resolveModel(options);\n\n    return streamText({\n        model,\n        system: options.system,\n        prompt,\n        temperature: options.temperature,\n        maxTokens: options.maxTokens,\n    } as any);\n}\n\nexport interface GenerateWithToolsOptions extends GenerateOptions {\n    /** Maximum tool call steps */\n    maxSteps?: number;\n    /** Callback for each step */\n    onStepFinish?: (step: { toolCalls?: unknown[]; toolResults?: unknown[]; text?: string }) => void;\n}\n\nexport interface GenerateWithToolsResult {\n    text: string;\n    toolCalls: unknown[];\n    toolResults: unknown[];\n    steps: unknown[];\n    finishReason: string;\n}\n\n/**\n * Generate with tools - multi-step agent execution\n */\nexport async function generateWithTools(\n    prompt: string,\n    tools: ToolSet,\n    options: GenerateWithToolsOptions = {}\n): Promise<GenerateWithToolsResult> {\n    const { model } = await resolveModel(options);\n\n    const result = await generateText({\n        model,\n        system: options.system,\n        prompt,\n        tools,\n        maxSteps: options.maxSteps ?? 10,\n        temperature: options.temperature,\n        maxTokens: options.maxTokens,\n        onStepFinish: options.onStepFinish\n            ? (step: any) => {\n                  options.onStepFinish?.({\n                      toolCalls: step.toolCalls,\n                      toolResults: step.toolResults,\n                      text: step.text,\n                  });\n              }\n            : undefined,\n    } as any);\n\n    // Collect all tool calls and results\n    const allToolCalls: unknown[] = [];\n    const allToolResults: unknown[] = [];\n\n    for (const step of result.steps || []) {\n        if (step.toolCalls) allToolCalls.push(...step.toolCalls);\n        if (step.toolResults) allToolResults.push(...step.toolResults);\n    }\n\n    return {\n        text: result.text,\n        toolCalls: allToolCalls,\n        toolResults: allToolResults,\n        steps: result.steps || [],\n        finishReason: result.finishReason,\n    };\n}\n\n/**\n * Create a tool definition\n */\nexport function createTool<T extends z.ZodType>(config: {\n    description: string;\n    inputSchema: T;\n    execute: (input: z.infer<T>) => Promise<unknown>;\n}) {\n    return (tool as any)({\n        description: config.description,\n        parameters: config.inputSchema,\n        execute: config.execute,\n    });\n}\n\n// Re-export from ai package\nexport { tool, generateText, streamText } from 'ai';\nexport { z } from 'zod';\n","/**\n * AI Provider Auto-Detection and Re-exports\n *\n * Automatically detects which AI provider to use based on environment variables.\n * Just set your API key and triage will use the right provider.\n *\n * Priority order (first key found wins):\n * 1. ANTHROPIC_API_KEY → Claude\n * 2. OPENAI_API_KEY → OpenAI\n * 3. GOOGLE_API_KEY / GOOGLE_GENERATIVE_AI_API_KEY → Gemini\n * 4. GROQ_API_KEY → Groq\n * 5. MISTRAL_API_KEY → Mistral\n * 6. DEEPSEEK_API_KEY → DeepSeek\n * 7. XAI_API_KEY → xAI/Grok\n * 8. TOGETHER_API_KEY → Together.ai\n * 9. AZURE_OPENAI_API_KEY → Azure OpenAI\n * 10. OLLAMA_API_KEY / OLLAMA_HOST → Ollama (cloud or local)\n * 11. (none) → Ollama local (default)\n */\n\n\n// Provider detection result\nexport interface DetectedProvider {\n    name: string;\n    modelId: string;\n    model: any;\n    source: string; // Which env var triggered detection\n}\n\n// Default models for each provider\nexport const DEFAULT_MODELS: Record<string, string> = {\n    anthropic: 'claude-sonnet-4-20250514',\n    openai: 'gpt-4o',\n    google: 'gemini-2.0-flash',\n    groq: 'llama-3.3-70b-versatile',\n    mistral: 'mistral-large-latest',\n    deepseek: 'deepseek-chat',\n    xai: 'grok-2',\n    togetherai: 'meta-llama/Llama-3.3-70B-Instruct-Turbo',\n    azure: 'gpt-4o',\n    ollama: 'llama3.3',\n    bedrock: 'anthropic.claude-3-5-sonnet-20241022-v2:0',\n};\n\n/**\n * Detect which provider to use based on environment variables\n */\nexport async function detectProvider(overrideModel?: string): Promise<DetectedProvider> {\n    // Check each provider in priority order\n\n    // 1. Anthropic (Claude)\n    if (process.env.ANTHROPIC_API_KEY) {\n        const { anthropic } = await import('@ai-sdk/anthropic');\n        const modelId = overrideModel || process.env.ANTHROPIC_MODEL || DEFAULT_MODELS.anthropic;\n        return {\n            name: 'anthropic',\n            modelId,\n            model: anthropic(modelId),\n            source: 'ANTHROPIC_API_KEY',\n        };\n    }\n\n    // 2. OpenAI\n    if (process.env.OPENAI_API_KEY) {\n        const { openai } = await import('@ai-sdk/openai');\n        const modelId = overrideModel || process.env.OPENAI_MODEL || DEFAULT_MODELS.openai;\n        return {\n            name: 'openai',\n            modelId,\n            model: openai(modelId),\n            source: 'OPENAI_API_KEY',\n        };\n    }\n\n    // 3. Google (Gemini)\n    if (process.env.GOOGLE_API_KEY || process.env.GOOGLE_GENERATIVE_AI_API_KEY) {\n        const { google } = await import('@ai-sdk/google');\n        const modelId = overrideModel || process.env.GOOGLE_MODEL || DEFAULT_MODELS.google;\n        return {\n            name: 'google',\n            modelId,\n            model: google(modelId),\n            source: process.env.GOOGLE_API_KEY ? 'GOOGLE_API_KEY' : 'GOOGLE_GENERATIVE_AI_API_KEY',\n        };\n    }\n\n    // 4. Groq\n    if (process.env.GROQ_API_KEY) {\n        const { groq } = await import('@ai-sdk/groq');\n        const modelId = overrideModel || process.env.GROQ_MODEL || DEFAULT_MODELS.groq;\n        return {\n            name: 'groq',\n            modelId,\n            model: groq(modelId),\n            source: 'GROQ_API_KEY',\n        };\n    }\n\n    // 5. Mistral\n    if (process.env.MISTRAL_API_KEY) {\n        const { mistral } = await import('@ai-sdk/mistral');\n        const modelId = overrideModel || process.env.MISTRAL_MODEL || DEFAULT_MODELS.mistral;\n        return {\n            name: 'mistral',\n            modelId,\n            model: mistral(modelId),\n            source: 'MISTRAL_API_KEY',\n        };\n    }\n\n    // 6. DeepSeek\n    if (process.env.DEEPSEEK_API_KEY) {\n        const { deepseek } = await import('@ai-sdk/deepseek');\n        const modelId = overrideModel || process.env.DEEPSEEK_MODEL || DEFAULT_MODELS.deepseek;\n        return {\n            name: 'deepseek',\n            modelId,\n            model: deepseek(modelId),\n            source: 'DEEPSEEK_API_KEY',\n        };\n    }\n\n    // 7. xAI (Grok)\n    if (process.env.XAI_API_KEY) {\n        const { xai } = await import('@ai-sdk/xai');\n        const modelId = overrideModel || process.env.XAI_MODEL || DEFAULT_MODELS.xai;\n        return {\n            name: 'xai',\n            modelId,\n            model: xai(modelId),\n            source: 'XAI_API_KEY',\n        };\n    }\n\n    // 8. Together.ai\n    if (process.env.TOGETHER_API_KEY) {\n        const { togetherai } = await import('@ai-sdk/togetherai');\n        const modelId = overrideModel || process.env.TOGETHER_MODEL || DEFAULT_MODELS.togetherai;\n        return {\n            name: 'togetherai',\n            modelId,\n            model: togetherai(modelId),\n            source: 'TOGETHER_API_KEY',\n        };\n    }\n\n    // 9. Azure OpenAI\n    if (process.env.AZURE_OPENAI_API_KEY) {\n        const { azure } = await import('@ai-sdk/azure');\n        const modelId = overrideModel || process.env.AZURE_MODEL || DEFAULT_MODELS.azure;\n        return {\n            name: 'azure',\n            modelId,\n            model: azure(modelId),\n            source: 'AZURE_OPENAI_API_KEY',\n        };\n    }\n\n    // 10. AWS Bedrock (check for AWS credentials)\n    if (process.env.AWS_ACCESS_KEY_ID || process.env.AWS_PROFILE) {\n        try {\n            const { bedrock } = await import('@ai-sdk/amazon-bedrock');\n            const modelId = overrideModel || process.env.BEDROCK_MODEL || DEFAULT_MODELS.bedrock;\n            return {\n                name: 'bedrock',\n                modelId,\n                model: bedrock(modelId),\n                source: process.env.AWS_ACCESS_KEY_ID ? 'AWS_ACCESS_KEY_ID' : 'AWS_PROFILE',\n            };\n        } catch {\n            // Bedrock not available, fall through\n        }\n    }\n\n    // 11. Ollama (cloud or local - default fallback)\n    const { createOllama, ollama } = await import('ai-sdk-ollama');\n    const modelId = overrideModel || process.env.OLLAMA_MODEL || DEFAULT_MODELS.ollama;\n\n    if (process.env.OLLAMA_API_KEY) {\n        // Ollama Cloud\n        const host = process.env.OLLAMA_HOST || 'https://ollama.com/api';\n        const provider = createOllama({\n            baseURL: host.endsWith('/api') ? host : `${host}/api`,\n            headers: { Authorization: `Bearer ${process.env.OLLAMA_API_KEY}` },\n        });\n        return {\n            name: 'ollama',\n            modelId,\n            model: provider(modelId),\n            source: 'OLLAMA_API_KEY',\n        };\n    }\n\n    // Local Ollama (absolute fallback)\n    return {\n        name: 'ollama',\n        modelId,\n        model: ollama(modelId),\n        source: 'default (local Ollama)',\n    };\n}\n\n/**\n * Get a specific provider by name (for explicit configuration)\n */\nexport async function getAIProvider(\n    name: string,\n    modelId?: string\n): Promise<{ model: any; modelId: string }> {\n    const resolvedModel = modelId || DEFAULT_MODELS[name] || 'default';\n\n    switch (name) {\n        case 'anthropic': {\n            const { anthropic } = await import('@ai-sdk/anthropic');\n            return { model: anthropic(resolvedModel), modelId: resolvedModel };\n        }\n        case 'openai': {\n            const { openai } = await import('@ai-sdk/openai');\n            return { model: openai(resolvedModel), modelId: resolvedModel };\n        }\n        case 'google':\n        case 'gemini': {\n            const { google } = await import('@ai-sdk/google');\n            return { model: google(resolvedModel), modelId: resolvedModel };\n        }\n        case 'groq': {\n            const { groq } = await import('@ai-sdk/groq');\n            return { model: groq(resolvedModel), modelId: resolvedModel };\n        }\n        case 'mistral': {\n            const { mistral } = await import('@ai-sdk/mistral');\n            return { model: mistral(resolvedModel), modelId: resolvedModel };\n        }\n        case 'deepseek': {\n            const { deepseek } = await import('@ai-sdk/deepseek');\n            return { model: deepseek(resolvedModel), modelId: resolvedModel };\n        }\n        case 'xai':\n        case 'grok': {\n            const { xai } = await import('@ai-sdk/xai');\n            return { model: xai(resolvedModel), modelId: resolvedModel };\n        }\n        case 'togetherai':\n        case 'together': {\n            const { togetherai } = await import('@ai-sdk/togetherai');\n            return { model: togetherai(resolvedModel), modelId: resolvedModel };\n        }\n        case 'azure': {\n            const { azure } = await import('@ai-sdk/azure');\n            return { model: azure(resolvedModel), modelId: resolvedModel };\n        }\n        case 'bedrock': {\n            const { bedrock } = await import('@ai-sdk/amazon-bedrock');\n            return { model: bedrock(resolvedModel), modelId: resolvedModel };\n        }\n        default: {\n            const { ollama } = await import('ai-sdk-ollama');\n            return { model: ollama(resolvedModel), modelId: resolvedModel };\n        }\n    }\n}\n\n/**\n * List all supported providers\n */\nexport function listAIProviders(): string[] {\n    return [\n        'anthropic',\n        'openai',\n        'google',\n        'groq',\n        'mistral',\n        'deepseek',\n        'xai',\n        'togetherai',\n        'azure',\n        'bedrock',\n        'ollama',\n    ];\n}\n\n/**\n * Check which providers are available (have API keys configured)\n */\nexport function getAvailableAIProviders(): string[] {\n    const available: string[] = [];\n\n    if (process.env.ANTHROPIC_API_KEY) available.push('anthropic');\n    if (process.env.OPENAI_API_KEY) available.push('openai');\n    if (process.env.GOOGLE_API_KEY || process.env.GOOGLE_GENERATIVE_AI_API_KEY) available.push('google');\n    if (process.env.GROQ_API_KEY) available.push('groq');\n    if (process.env.MISTRAL_API_KEY) available.push('mistral');\n    if (process.env.DEEPSEEK_API_KEY) available.push('deepseek');\n    if (process.env.XAI_API_KEY) available.push('xai');\n    if (process.env.TOGETHER_API_KEY) available.push('togetherai');\n    if (process.env.AZURE_OPENAI_API_KEY) available.push('azure');\n    if (process.env.AWS_ACCESS_KEY_ID || process.env.AWS_PROFILE) available.push('bedrock');\n    if (process.env.OLLAMA_API_KEY) available.push('ollama-cloud');\n\n    // Ollama local is always \"available\" as fallback\n    available.push('ollama');\n\n    return available;\n}\n"],"mappings":"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","names":["modelId","tool","generateText","streamText"]}