{"version":3,"sources":["../src/tools/issue.ts","../src/tools/pr.ts","../src/tools/review.ts","../src/tools/sage.ts","../src/tools/visual.ts","../src/tools/index.ts"],"sourcesContent":["import { tool } from 'ai';\nimport { z } from 'zod';\nimport * as handlers from '../handlers/issue.js';\nimport { IssueTriageSchema } from '../schemas/issue.js';\nimport { TriageConnectors } from '../triage/connectors.js';\n\nexport const listIssuesTool = tool({\n    description: 'List issues from the issue tracker with optional filters.',\n    inputSchema: z.object({\n        status: z.enum(['open', 'in_progress', 'blocked', 'closed']).optional(),\n        priority: z.enum(['critical', 'high', 'medium', 'low', 'backlog']).optional(),\n        type: z.enum(['bug', 'feature', 'task', 'epic', 'chore', 'docs']).optional(),\n        labels: z.array(z.string()).optional(),\n        limit: z.number().optional(),\n        assignee: z.string().optional(),\n    }),\n    execute: async (args) => handlers.handleListIssues(args),\n});\n\nexport const getIssueTool = tool({\n    description: 'Get detailed issue by ID.',\n    inputSchema: z.object({\n        id: z.string().describe('The issue ID'),\n    }),\n    execute: async ({ id }) => handlers.handleGetIssue(id),\n});\n\nexport const createIssueTool = tool({\n    description: 'Create a new issue in the issue tracker.',\n    inputSchema: z.object({\n        title: z.string().describe('Issue title'),\n        description: z.string().optional().describe('Issue description/body'),\n        type: z.enum(['bug', 'feature', 'task', 'epic', 'chore', 'docs']).optional().default('task'),\n        priority: z.enum(['critical', 'high', 'medium', 'low', 'backlog']).optional().default('medium'),\n        labels: z.array(z.string()).optional(),\n        assignee: z.string().optional(),\n    }),\n    execute: async (options) => {\n        const connectors = new TriageConnectors();\n        return connectors.issues.create(options);\n    },\n});\n\nexport const updateIssueTool = tool({\n    description: 'Update issue fields.',\n    inputSchema: z.object({\n        id: z.string().describe('The issue ID to update'),\n        updates: z.object({\n            title: z.string().optional(),\n            description: z.string().optional(),\n            status: z.enum(['open', 'in_progress', 'blocked', 'closed']).optional(),\n            priority: z.enum(['critical', 'high', 'medium', 'low', 'backlog']).optional(),\n            type: z.enum(['bug', 'feature', 'task', 'epic', 'chore', 'docs']).optional(),\n            assignee: z.string().optional(),\n        }),\n    }),\n    execute: async ({ id, updates }) => {\n        const connectors = new TriageConnectors();\n        return connectors.issues.update(id, updates);\n    },\n});\n\nexport const triageIssueTool = tool({\n    description: 'Apply structured triage analysis to an issue (title, priority, type, labels, etc.)',\n    inputSchema: z.object({\n        id: z.string().describe('The issue ID to triage'),\n        analysis: IssueTriageSchema,\n    }),\n    execute: async ({ id, analysis }) => handlers.handleTriageIssue(id, analysis),\n});\n\nexport const closeIssueTool = tool({\n    description: 'Close issue with reason.',\n    inputSchema: z.object({\n        id: z.string().describe('The ID of the issue to close.'),\n        reason: z.string().optional().describe('Optional reason for closing.'),\n    }),\n    execute: async ({ id, reason }) => {\n        const connectors = new TriageConnectors();\n        return connectors.issues.close(id, reason);\n    },\n});\n\nexport const searchIssuesTool = tool({\n    description: 'Full-text search across issues.',\n    inputSchema: z.object({\n        query: z.string().describe('The search query.'),\n    }),\n    execute: async ({ query }) => {\n        const connectors = new TriageConnectors();\n        return connectors.issues.search(query);\n    },\n});\n\nexport const addLabelsTool = tool({\n    description: 'Add labels to an issue.',\n    inputSchema: z.object({\n        id: z.string().describe('The ID of the issue.'),\n        labels: z.array(z.string()).describe('The labels to add.'),\n    }),\n    execute: async ({ id, labels }) => {\n        const connectors = new TriageConnectors();\n        await connectors.issues.addLabels(id, labels);\n        return { id, labelsAdded: labels };\n    },\n});\n\nexport const removeLabelsTool = tool({\n    description: 'Remove labels from an issue.',\n    inputSchema: z.object({\n        id: z.string().describe('The ID of the issue.'),\n        labels: z.array(z.string()).describe('The labels to remove.'),\n    }),\n    execute: async ({ id, labels }) => {\n        const connectors = new TriageConnectors();\n        await connectors.issues.removeLabels(id, labels);\n        return { id, labelsRemoved: labels };\n    },\n});\n","import { tool } from 'ai';\nimport { z } from 'zod';\nimport * as handlers from '../handlers/pr.js';\nimport { PRAnalysisSchema } from '../schemas/pr.js';\n\nexport const analyzePRTool = tool({\n    description: 'Submit a structured analysis of a pull request',\n    inputSchema: z.object({\n        prNumber: z.number().describe('The pull request number'),\n        analysis: PRAnalysisSchema,\n    }),\n    execute: async ({ prNumber, analysis }) => handlers.handleAnalyzePR(prNumber, analysis),\n});\n","import { tool } from 'ai';\nimport { z } from 'zod';\nimport * as handlers from '../handlers/review.js';\nimport { CodeReviewSchema } from '../schemas/review.js';\n\nexport const submitReviewTool = tool({\n    description: 'Submit a structured code review for a pull request',\n    inputSchema: z.object({\n        prNumber: z.number().describe('The pull request number'),\n        review: CodeReviewSchema,\n    }),\n    execute: async ({ prNumber, review }) => handlers.handleSubmitReview(prNumber, review),\n});\n","import { z } from 'zod';\nimport { createTool, resolveModel } from '@agentic/triage-ai';\nimport { sage } from '../handlers/sage.js';\n\nexport const sageTool = createTool({\n    description: 'Ask Sage for technical advice, task decomposition, or agent routing based on repository context.',\n    inputSchema: z.object({\n        query: z.string().describe('The question or request for Sage'),\n        context: z\n            .object({\n                repoStructure: z.string().optional().describe('Repository file structure'),\n                keyFiles: z.record(z.string(), z.string()).optional().describe('Contents of key files'),\n                issueContext: z.string().optional().describe('Context from a GitHub issue or PR'),\n                currentContext: z.string().optional().describe('Current working context'),\n            })\n            .optional(),\n    }),\n    execute: async ({ query, context }) => {\n        const { model } = await resolveModel({});\n        return await sage(query, model, context as any);\n    },\n});\n","import { chromium } from '@playwright/test';\nimport { z } from 'zod';\nimport { createTool, resolveModel } from '@agentic/triage-ai';\n\nexport const visualReviewTool = createTool({\n    description: 'Perform a visual review of a web page using Playwright and AI analysis.',\n    inputSchema: z.object({\n        url: z.string().describe('The URL of the page to review'),\n        scenario: z.string().optional().describe('Description of the scenario to test'),\n        viewport: z\n            .object({\n                width: z.number().default(1280),\n                height: z.number().default(720),\n            })\n            .optional(),\n    }),\n    execute: async ({ url, scenario, viewport }) => {\n        const browser = await chromium.launch();\n        const context = await browser.newContext({\n            viewport: viewport || { width: 1280, height: 720 },\n        });\n        const page = await context.newPage();\n\n        try {\n            console.log(`Navigating to ${url}...`);\n            await page.goto(url, { waitUntil: 'networkidle' });\n\n            if (scenario) {\n                console.log(`Executing scenario: ${scenario}`);\n                // In a real implementation, we would parse and execute the scenario\n                // For now, we just take a screenshot after navigation\n            }\n\n            const screenshot = await page.screenshot({ fullPage: true });\n            const _base64Screenshot = screenshot.toString('base64');\n\n            const { model } = await resolveModel({ provider: 'anthropic' });\n\n            // Here we would call the model with the image\n            // Since the Vercel AI SDK handles images in generateText, we can use that\n            // For now, return success with the screenshot metadata\n\n            return {\n                url,\n                status: 'success',\n                screenshotTaken: true,\n                analysis: 'Visual review capability established. Ready for AI image analysis integration.',\n            };\n        } catch (error: any) {\n            return {\n                url,\n                status: 'error',\n                message: error.message,\n            };\n        } finally {\n            await browser.close();\n        }\n    },\n});\n","import {\n    addLabelsTool,\n    closeIssueTool,\n    createIssueTool,\n    getIssueTool,\n    listIssuesTool,\n    removeLabelsTool,\n    searchIssuesTool,\n    triageIssueTool,\n    updateIssueTool,\n} from './issue.js';\nimport { analyzePRTool } from './pr.js';\nimport { submitReviewTool } from './review.js';\nimport { sageTool } from './sage.js';\nimport { visualReviewTool } from './visual.js';\n\nexport * from './issue.js';\nexport * from './pr.js';\nexport * from './review.js';\nexport * from './sage.js';\nexport * from './visual.js';\n\nexport const triageTools = {\n    listIssues: listIssuesTool,\n    getIssue: getIssueTool,\n    createIssue: createIssueTool,\n    updateIssue: updateIssueTool,\n    closeIssue: closeIssueTool,\n    searchIssues: searchIssuesTool,\n    addLabels: addLabelsTool,\n    removeLabels: removeLabelsTool,\n    triageIssue: triageIssueTool,\n    submitReview: submitReviewTool,\n    analyzePR: analyzePRTool,\n    sage: sageTool,\n    visualReview: visualReviewTool,\n};\n\nexport function getTriageTools() {\n    return triageTools;\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAAA,SAAS,YAAY;AACrB,SAAS,SAAS;AAKX,IAAM,iBAAiB,KAAK;AAAA,EAC/B,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,QAAQ,EAAE,KAAK,CAAC,QAAQ,eAAe,WAAW,QAAQ,CAAC,EAAE,SAAS;AAAA,IACtE,UAAU,EAAE,KAAK,CAAC,YAAY,QAAQ,UAAU,OAAO,SAAS,CAAC,EAAE,SAAS;AAAA,IAC5E,MAAM,EAAE,KAAK,CAAC,OAAO,WAAW,QAAQ,QAAQ,SAAS,MAAM,CAAC,EAAE,SAAS;AAAA,IAC3E,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,SAAS;AAAA,IACrC,OAAO,EAAE,OAAO,EAAE,SAAS;AAAA,IAC3B,UAAU,EAAE,OAAO,EAAE,SAAS;AAAA,EAClC,CAAC;AAAA,EACD,SAAS,OAAO,SAAkB,iBAAiB,IAAI;AAC3D,CAAC;AAEM,IAAM,eAAe,KAAK;AAAA,EAC7B,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,IAAI,EAAE,OAAO,EAAE,SAAS,cAAc;AAAA,EAC1C,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,GAAG,MAAe,eAAe,EAAE;AACzD,CAAC;AAEM,IAAM,kBAAkB,KAAK;AAAA,EAChC,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,OAAO,EAAE,OAAO,EAAE,SAAS,aAAa;AAAA,IACxC,aAAa,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,wBAAwB;AAAA,IACpE,MAAM,EAAE,KAAK,CAAC,OAAO,WAAW,QAAQ,QAAQ,SAAS,MAAM,CAAC,EAAE,SAAS,EAAE,QAAQ,MAAM;AAAA,IAC3F,UAAU,EAAE,KAAK,CAAC,YAAY,QAAQ,UAAU,OAAO,SAAS,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ;AAAA,IAC9F,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,SAAS;AAAA,IACrC,UAAU,EAAE,OAAO,EAAE,SAAS;AAAA,EAClC,CAAC;AAAA,EACD,SAAS,OAAO,YAAY;AACxB,UAAM,aAAa,IAAI,iBAAiB;AACxC,WAAO,WAAW,OAAO,OAAO,OAAO;AAAA,EAC3C;AACJ,CAAC;AAEM,IAAM,kBAAkB,KAAK;AAAA,EAChC,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,IAAI,EAAE,OAAO,EAAE,SAAS,wBAAwB;AAAA,IAChD,SAAS,EAAE,OAAO;AAAA,MACd,OAAO,EAAE,OAAO,EAAE,SAAS;AAAA,MAC3B,aAAa,EAAE,OAAO,EAAE,SAAS;AAAA,MACjC,QAAQ,EAAE,KAAK,CAAC,QAAQ,eAAe,WAAW,QAAQ,CAAC,EAAE,SAAS;AAAA,MACtE,UAAU,EAAE,KAAK,CAAC,YAAY,QAAQ,UAAU,OAAO,SAAS,CAAC,EAAE,SAAS;AAAA,MAC5E,MAAM,EAAE,KAAK,CAAC,OAAO,WAAW,QAAQ,QAAQ,SAAS,MAAM,CAAC,EAAE,SAAS;AAAA,MAC3E,UAAU,EAAE,OAAO,EAAE,SAAS;AAAA,IAClC,CAAC;AAAA,EACL,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,IAAI,QAAQ,MAAM;AAChC,UAAM,aAAa,IAAI,iBAAiB;AACxC,WAAO,WAAW,OAAO,OAAO,IAAI,OAAO;AAAA,EAC/C;AACJ,CAAC;AAEM,IAAM,kBAAkB,KAAK;AAAA,EAChC,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,IAAI,EAAE,OAAO,EAAE,SAAS,wBAAwB;AAAA,IAChD,UAAU;AAAA,EACd,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,IAAI,SAAS,MAAe,kBAAkB,IAAI,QAAQ;AAChF,CAAC;AAEM,IAAM,iBAAiB,KAAK;AAAA,EAC/B,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,IAAI,EAAE,OAAO,EAAE,SAAS,+BAA+B;AAAA,IACvD,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,8BAA8B;AAAA,EACzE,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,IAAI,OAAO,MAAM;AAC/B,UAAM,aAAa,IAAI,iBAAiB;AACxC,WAAO,WAAW,OAAO,MAAM,IAAI,MAAM;AAAA,EAC7C;AACJ,CAAC;AAEM,IAAM,mBAAmB,KAAK;AAAA,EACjC,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,OAAO,EAAE,OAAO,EAAE,SAAS,mBAAmB;AAAA,EAClD,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,MAAM,MAAM;AAC1B,UAAM,aAAa,IAAI,iBAAiB;AACxC,WAAO,WAAW,OAAO,OAAO,KAAK;AAAA,EACzC;AACJ,CAAC;AAEM,IAAM,gBAAgB,KAAK;AAAA,EAC9B,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,IAAI,EAAE,OAAO,EAAE,SAAS,sBAAsB;AAAA,IAC9C,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,SAAS,oBAAoB;AAAA,EAC7D,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,IAAI,OAAO,MAAM;AAC/B,UAAM,aAAa,IAAI,iBAAiB;AACxC,UAAM,WAAW,OAAO,UAAU,IAAI,MAAM;AAC5C,WAAO,EAAE,IAAI,aAAa,OAAO;AAAA,EACrC;AACJ,CAAC;AAEM,IAAM,mBAAmB,KAAK;AAAA,EACjC,aAAa;AAAA,EACb,aAAa,EAAE,OAAO;AAAA,IAClB,IAAI,EAAE,OAAO,EAAE,SAAS,sBAAsB;AAAA,IAC9C,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,SAAS,uBAAuB;AAAA,EAChE,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,IAAI,OAAO,MAAM;AAC/B,UAAM,aAAa,IAAI,iBAAiB;AACxC,UAAM,WAAW,OAAO,aAAa,IAAI,MAAM;AAC/C,WAAO,EAAE,IAAI,eAAe,OAAO;AAAA,EACvC;AACJ,CAAC;;;ACtHD,SAAS,QAAAA,aAAY;AACrB,SAAS,KAAAC,UAAS;AAIX,IAAM,gBAAgBC,MAAK;AAAA,EAC9B,aAAa;AAAA,EACb,aAAaC,GAAE,OAAO;AAAA,IAClB,UAAUA,GAAE,OAAO,EAAE,SAAS,yBAAyB;AAAA,IACvD,UAAU;AAAA,EACd,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,UAAU,SAAS,MAAe,gBAAgB,UAAU,QAAQ;AAC1F,CAAC;;;ACZD,SAAS,QAAAC,aAAY;AACrB,SAAS,KAAAC,UAAS;AAIX,IAAM,mBAAmBC,MAAK;AAAA,EACjC,aAAa;AAAA,EACb,aAAaC,GAAE,OAAO;AAAA,IAClB,UAAUA,GAAE,OAAO,EAAE,SAAS,yBAAyB;AAAA,IACvD,QAAQ;AAAA,EACZ,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,UAAU,OAAO,MAAe,mBAAmB,UAAU,MAAM;AACzF,CAAC;;;ACZD,SAAS,KAAAC,UAAS;AAClB,SAAS,YAAY,oBAAoB;AAGlC,IAAM,WAAW,WAAW;AAAA,EAC/B,aAAa;AAAA,EACb,aAAaC,GAAE,OAAO;AAAA,IAClB,OAAOA,GAAE,OAAO,EAAE,SAAS,kCAAkC;AAAA,IAC7D,SAASA,GACJ,OAAO;AAAA,MACJ,eAAeA,GAAE,OAAO,EAAE,SAAS,EAAE,SAAS,2BAA2B;AAAA,MACzE,UAAUA,GAAE,OAAOA,GAAE,OAAO,GAAGA,GAAE,OAAO,CAAC,EAAE,SAAS,EAAE,SAAS,uBAAuB;AAAA,MACtF,cAAcA,GAAE,OAAO,EAAE,SAAS,EAAE,SAAS,mCAAmC;AAAA,MAChF,gBAAgBA,GAAE,OAAO,EAAE,SAAS,EAAE,SAAS,yBAAyB;AAAA,IAC5E,CAAC,EACA,SAAS;AAAA,EAClB,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,OAAO,QAAQ,MAAM;AACnC,UAAM,EAAE,MAAM,IAAI,MAAM,aAAa,CAAC,CAAC;AACvC,WAAO,MAAM,KAAK,OAAO,OAAO,OAAc;AAAA,EAClD;AACJ,CAAC;;;ACrBD,SAAS,gBAAgB;AACzB,SAAS,KAAAC,UAAS;AAClB,SAAS,cAAAC,aAAY,gBAAAC,qBAAoB;AAElC,IAAM,mBAAmBD,YAAW;AAAA,EACvC,aAAa;AAAA,EACb,aAAaD,GAAE,OAAO;AAAA,IAClB,KAAKA,GAAE,OAAO,EAAE,SAAS,+BAA+B;AAAA,IACxD,UAAUA,GAAE,OAAO,EAAE,SAAS,EAAE,SAAS,qCAAqC;AAAA,IAC9E,UAAUA,GACL,OAAO;AAAA,MACJ,OAAOA,GAAE,OAAO,EAAE,QAAQ,IAAI;AAAA,MAC9B,QAAQA,GAAE,OAAO,EAAE,QAAQ,GAAG;AAAA,IAClC,CAAC,EACA,SAAS;AAAA,EAClB,CAAC;AAAA,EACD,SAAS,OAAO,EAAE,KAAK,UAAU,SAAS,MAAM;AAC5C,UAAM,UAAU,MAAM,SAAS,OAAO;AACtC,UAAM,UAAU,MAAM,QAAQ,WAAW;AAAA,MACrC,UAAU,YAAY,EAAE,OAAO,MAAM,QAAQ,IAAI;AAAA,IACrD,CAAC;AACD,UAAM,OAAO,MAAM,QAAQ,QAAQ;AAEnC,QAAI;AACA,cAAQ,IAAI,iBAAiB,GAAG,KAAK;AACrC,YAAM,KAAK,KAAK,KAAK,EAAE,WAAW,cAAc,CAAC;AAEjD,UAAI,UAAU;AACV,gBAAQ,IAAI,uBAAuB,QAAQ,EAAE;AAAA,MAGjD;AAEA,YAAM,aAAa,MAAM,KAAK,WAAW,EAAE,UAAU,KAAK,CAAC;AAC3D,YAAM,oBAAoB,WAAW,SAAS,QAAQ;AAEtD,YAAM,EAAE,MAAM,IAAI,MAAME,cAAa,EAAE,UAAU,YAAY,CAAC;AAM9D,aAAO;AAAA,QACH;AAAA,QACA,QAAQ;AAAA,QACR,iBAAiB;AAAA,QACjB,UAAU;AAAA,MACd;AAAA,IACJ,SAAS,OAAY;AACjB,aAAO;AAAA,QACH;AAAA,QACA,QAAQ;AAAA,QACR,SAAS,MAAM;AAAA,MACnB;AAAA,IACJ,UAAE;AACE,YAAM,QAAQ,MAAM;AAAA,IACxB;AAAA,EACJ;AACJ,CAAC;;;ACpCM,IAAM,cAAc;AAAA,EACvB,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,aAAa;AAAA,EACb,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,cAAc;AAAA,EACd,WAAW;AAAA,EACX,cAAc;AAAA,EACd,aAAa;AAAA,EACb,cAAc;AAAA,EACd,WAAW;AAAA,EACX,MAAM;AAAA,EACN,cAAc;AAClB;AAEO,SAAS,iBAAiB;AAC7B,SAAO;AACX;","names":["tool","z","tool","z","tool","z","tool","z","z","z","z","createTool","resolveModel"]}